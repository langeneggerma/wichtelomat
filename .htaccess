# Wichtelomat .htaccess Configuration
# Compatible with Apache 2.4+ and modern PHP

# Set default index file
DirectoryIndex index.php

# Security: Protect sensitive files and directories using Apache 2.4 syntax
<Files "config.php">
    Require all denied
</Files>

<Files "WichtelomatSession.php">
    Require all denied
</Files>

# Protect data directory
<Directory "data">
    Require all denied
</Directory>

# Protect session files (JSON)
<FilesMatch "\.json$">
    Require all denied
</FilesMatch>

# Protect legacy files
<Files "participants.txt">
    Require all denied
</Files>

<Files "assignments.txt">
    Require all denied
</Files>

# Protect system files
<Files ".htaccess">
    Require all denied
</Files>

<Files ".gitignore">
    Require all denied
</Files>

<Files "*.log">
    Require all denied
</Files>

<Files ".gitkeep">
    Require all denied
</Files>

# Security headers (optional - only if mod_headers is available)
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Compression for better performance (optional)
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/json
</IfModule>

# Browser caching for static assets (optional)
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
</IfModule>